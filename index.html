<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ratarasmp Shop</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<style>
body{
margin:0;
font-family:'Poppins',sans-serif;
background:linear-gradient(135deg,#140f2d,#1c1340,#0f0a25);
color:white;
}

header{
text-align:center;
padding:35px;
font-size:32px;
font-weight:700;
background:linear-gradient(90deg,#00f7ff,#8a2be2);
-webkit-background-clip:text;
color:transparent;
text-shadow:0 0 25px rgba(0,255,255,0.6);
cursor:pointer;
user-select: none;
display: block;
position: relative;
z-index: 100;
}

.container{
padding:20px;
max-width:1000px;
margin:auto;
}

.products-grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
gap:20px;
margin-top:10px;
}

.product-card{
background:#181828;
border:1px solid #2a2a4a;
border-radius:14px;
padding:18px;
transition:0.3s;
display:flex;
flex-direction:column;
justify-content:space-between;
}

.product-card:hover{
border:1px solid #00f7ff;
box-shadow:0 0 18px rgba(0,247,255,0.35);
}

.product-title{font-size:17px;font-weight:600;margin-bottom:6px;}
.product-desc{font-size:13px;opacity:0.75;margin-bottom:12px;line-height:1.6;white-space:pre-line;word-wrap:break-word;}
.product-price{font-size:15px;font-weight:700;margin-bottom:12px;}
.product-btn{width:100%;background:#1677ff;color:white;padding:8px;border-radius:8px;font-size:14px;border:none;cursor:pointer;transition:0.2s;}
.product-btn:hover{opacity:0.85;}

.card{
background:rgba(255,255,255,0.05);
backdrop-filter:blur(15px);
padding:25px;
border-radius:20px;
margin-bottom:25px;
border:1px solid rgba(0,255,255,0.4);
box-shadow:0 0 25px rgba(0,255,255,0.3);
text-align:center;
}

button{padding:10px 18px;border:none;border-radius:12px;cursor:pointer;font-weight:600;margin-top:10px;}
.buy-btn{background:linear-gradient(90deg,#00f7ff,#8a2be2);color:white;}

input, textarea{width:100%;padding:10px;margin:6px 0;border-radius:10px;border:1px solid rgba(0,255,255,0.4);background:rgba(255,255,255,0.05);color:white;outline:none;font-family:'Poppins',sans-serif;box-sizing:border-box;}
textarea{resize:none;}

.qris-img{max-width:260px;margin-top:15px;border-radius:15px;box-shadow:0 0 25px #00f7ff;}
.warning{color:#00f7ff;margin-top:12px;font-size:14px;}

.about-box {
background: #181828; 
border: 2px solid #3d1c5c; 
border-radius: 20px;
padding: 40px;
margin-top: 50px;
text-align: left;
box-shadow: 0 0 20px rgba(61, 28, 92, 0.5);
}
.about-box h2 { 
color: #00fbff; 
font-size: 22px; 
margin-bottom: 15px; 
margin-top: 25px; 
text-shadow: 0 0 10px rgba(0, 251, 255, 0.4);
}
.about-box h2:first-child { margin-top: 0; }
.ip-badge { background: #8a2be2; padding: 6px 15px; border-radius: 12px; font-weight: bold; }
.about-box ul { list-style: none; padding-left: 0; color: #ffffff; }
.about-box ul li { margin-bottom: 8px; font-size: 15px; }
.about-box ul li::before { content: "‚Ä¢ "; color: #00fbff; font-weight: bold; }

.social-icons { text-align: center; margin-top: 40px; display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; }
.social-icons a { background: #24143d; width: 45px; height: 45px; display: flex; justify-content: center; align-items: center; border-radius: 50%; color: white; text-decoration: none; font-size: 20px; transition: 0.3s; }
.social-icons a:hover { background: #00fbff; color: #0d061a; transform: translateY(-5px); box-shadow: 0 0 15px #00fbff; }

/* ========== ADMIN PANEL STYLES ========== */
.admin-badge {
    background: linear-gradient(90deg, #ff6b6b, #ff4757);
    color: white;
    padding: 8px 20px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 15px;
    box-shadow: 0 0 15px rgba(255, 71, 87, 0.5);
}

.admin-card {
    background: rgba(255,255,255,0.08);
    backdrop-filter: blur(10px);
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 20px;
    border: 1px solid rgba(255,255,255,0.1);
    text-align: left;
}

.admin-card h4 {
    margin: 0 0 15px 0;
    color: #00f7ff;
    font-size: 16px;
}

.admin-input {
    width: 100%;
    padding: 12px 15px;
    margin-bottom: 10px;
    border-radius: 10px;
    border: 1px solid rgba(0,247,255,0.3);
    background: rgba(0,0,0,0.4);
    color: white;
    font-family: 'Poppins', sans-serif;
    font-size: 14px;
    box-sizing: border-box;
}

.admin-input:focus {
    border-color: #00f7ff;
    box-shadow: 0 0 10px rgba(0,247,255,0.3);
    outline: none;
}

.admin-textarea {
    width: 100%;
    padding: 12px 15px;
    margin-bottom: 10px;
    border-radius: 10px;
    border: 1px solid rgba(0,247,255,0.3);
    background: rgba(0,0,0,0.4);
    color: white;
    font-family: 'Poppins', sans-serif;
    font-size: 14px;
    resize: vertical;
    min-height: 80px;
    box-sizing: border-box;
}

.btn-save {
    background: #2ecc71;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    margin-right: 8px;
}

.btn-delete {
    background: #e74c3c;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
}

.btn-done {
    background: #00f7ff;
    color: #0d061a;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    margin-right: 8px;
}

.btn-back {
    background: #6c5ce7;
    color: white;
    padding: 12px 25px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-weight: 600;
    font-size: 15px;
    margin-top: 20px;
}

.transaksi-item {
    background: rgba(0,0,0,0.3);
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 15px;
    border-left: 4px solid #00f7ff;
}

.transaksi-item.selesai {
    border-left-color: #2ecc71;
    opacity: 0.8;
}

.status-menunggu { color: #f1c40f; }
.status-selesai { color: #2ecc71; }

.stats-box {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-bottom: 25px;
}

.stat-card {
    background: linear-gradient(135deg, #667eea, #764ba2);
    padding: 20px;
    border-radius: 15px;
    text-align: center;
}

.stat-card h3 { margin: 0; font-size: 28px; }
.stat-card p { margin: 5px 0 0 0; opacity: 0.9; font-size: 13px; }
</style>
</head>
<body>

<header id="secretHeader">Ratarasmp Shop</header>
<div class="container" id="store"></div>

<div class="container" id="about-section">
    <div class="about-box">
        <h2>About Server</h2>
        <p>Ratara SMP adalah server Minecraft bertemakan survival economy.</p>
        
        <h2>IP & Port</h2>
        <p><span class="ip-badge">ratarasmp.my.id</span> : 19132</p>

        <h2>Fitur Server</h2>
        <ul>
            <li>Gacha</li>
            <li>Custom Enchant</li>
            <li>Coin Flip</li>
            <li>Auction House</li>
            <li>Fishing</li>
            <li>Dll</li>
        </ul>

        <div style="text-align:center; margin-top:40px;">
            <h2 style="display:inline-block;">Media Social</h2>
            <div class="social-icons">
                <a href="https://tiktok.com/@ratara.smp" target="_blank"><i class="fab fa-tiktok"></i></a>
                <a href="https://discord.gg/FyT5eZXPnh" target="_blank"><i class="fab fa-discord"></i></a>
                <a href="https://linktr.ee/ratarasmp" target="_blank"><i class="fas fa-globe"></i></a>
                <a href="https://chat.whatsapp.com/F7QL2jqqWLVLqv5TCL42AK?mode=gi_t" target="_blank"><i class="fab fa-whatsapp"></i></a>
                <a href="https://mrjhonmc.web.id/kasir.github.io" target="_blank"><i class="fas fa-shopping-cart"></i></a>
                <a href="mailto:ratarasmp@gmail.com"><i class="fas fa-envelope"></i></a>
                <a href="https://minecraft-mp.com/server/351990/vote/" target="_blank"><i class="fas fa-check-square"></i></a>
                <a href="https://minecraftpocket-servers.com/server/132395/vote/" target="_blank"><i class="fas fa-vote-yea"></i></a>
            </div>
        </div>
        <p style="text-align:center; font-size:12px; color:#666; margin-top:30px;">¬© 2026 Mrjhon Mc</p>
    </div>
</div>

<script>
let seller = "6285143590943";
let adminPass = "rataradev";
let selectedProduct = null;
let buyerData = {};
let clickCount = 0;

let defaultProducts = [
    {name:"Fruzy", desc:"Rank Fruzy Basic\nFitur:\n- /kit\n- /heal", price:10000},
    {name:"VIP", desc:"Rank VIP\nFitur:\n- /fly\n- /nick\n- Sethome 7", price:20000},
    {name:"MVP", desc:"Rank MVP Full Power\nFitur:\n- Semua fitur VIP\n- Vault 5", price:30000}
];

if(!localStorage.getItem("products")) localStorage.setItem("products",JSON.stringify(defaultProducts));
if(!localStorage.getItem("transactions")) localStorage.setItem("transactions",JSON.stringify([]));

/* FITUR RAHASIA ADMIN */
document.getElementById("secretHeader").addEventListener("click", function(){
    clickCount++;
    if(clickCount >= 5){ 
        clickCount = 0; 
        adminLogin(); 
    }
});

function adminLogin(){
    let pass = prompt("Masukkan Password Admin:");
    if(pass === adminPass){
        adminPanel();
    } else if (pass !== null) {
        alert("Password salah!");
    }
}

/* LOAD STORE */
function loadStore(){
    document.getElementById("about-section").style.display = "block";
    let store = document.getElementById("store");
    let products = JSON.parse(localStorage.getItem("products"));
    let html = `<div class="products-grid">`;
    products.forEach((p,i)=>{
        html+=`
        <div class="product-card">
            <div>
                <div class="product-title">${p.name}</div>
                <div class="product-desc">${p.desc}</div>
                <div class="product-price">Rp ${p.price.toLocaleString()}</div>
            </div>
            <button class="product-btn" onclick="buyForm(${i})">Buy</button>
        </div>`;
    });
    html+=`</div>`;
    store.innerHTML = html;
}

/* BUY FORM */
function buyForm(index){
    document.getElementById("about-section").style.display = "none";
    let products = JSON.parse(localStorage.getItem("products"));
    selectedProduct = products[index];
    document.getElementById("store").innerHTML=`
    <div class="card">
        <h3>Beli ${selectedProduct.name}</h3>
        <input id="mc" placeholder="Nama Minecraft">
        <input id="wa" placeholder="Nomor WhatsApp">
        <button class="buy-btn" onclick="showQRIS()">Lanjut Pembayaran</button>
        <button onclick="loadStore()">Batal</button>
    </div>`;
}

function showQRIS(){
    let mc = document.getElementById("mc").value;
    let wa = document.getElementById("wa").value;
    if(!mc || !wa){ alert("Isi semua data!"); return; }
    buyerData = {mc, wa};
    let qrisSrc = "https://files.catbox.moe/fkxzic.jpeg";

    document.getElementById
  function showQRIS(){
    let mc = document.getElementById("mc").value;
    let wa = document.getElementById("wa").value;
    if(!mc || !wa){ alert("Isi semua data!"); return; }
    buyerData = {mc, wa};
    let qrisSrc = "https://files.catbox.moe/fkxzic.jpeg";

    document.getElementById("store").innerHTML=`
    <div class="card">
        <h3>Scan QRIS Untuk Bayar</h3>
        <p>Total: Rp${selectedProduct.price.toLocaleString()}</p>
        <img id="qrisImg" class="qris-img" src="${qrisSrc}">
        <p class="warning">‚ö†Ô∏è Setelah bayar WAJIB screenshot bukti transfer.</p>
        <button class="buy-btn" onclick="confirmPayment()">Saya Sudah Bayar</button>
        <button class="buy-btn" onclick="downloadQRIS()">Download QRIS</button>
        <button onclick="loadStore()">Batal</button>
    </div>`;
}

async function downloadQRIS(){
    let qrisSrc = "https://files.catbox.moe/fkxzic.jpeg";
    try {
        const response = await fetch(qrisSrc);
        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const link = document.createElement("a");
        link.href = url;
        link.download = "QRIS_Ratarasmp.jpg";
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        window.URL.revokeObjectURL(url);
    } catch (error) {
        alert("Gagal download otomatis. Silakan tekan lama gambar lalu simpan manual.");
    }
}

function confirmPayment(){
    let id = "RTRX-"+Math.floor(Math.random()*1000000);
    let date = new Date().toLocaleString();
    let transaksi = {id, produk:selectedProduct.name, tanggal:date, mc:buyerData.mc, wa:buyerData.wa, harga:selectedProduct.price, status:"üü° Menunggu Pesanan"};
    let all = JSON.parse(localStorage.getItem("transactions"));
    all.push(transaksi);
    localStorage.setItem("transactions",JSON.stringify(all));
    showStruk(transaksi);
}

function showStruk(t){
    let pesan = `Hai Admin, Saya Sudah Melakukan Pembayaran.\n\n====================\nID Transaksi: ${t.id}\nTanggal: ${t.tanggal}\nNama MC: ${t.mc}\nNomor WA: ${t.wa}\nProduk: ${t.produk}\nHarga: Rp${t.harga.toLocaleString()}\n====================\n\nSaya Akan Mengirim Bukti Pembayaran Sekarang.`;
    let encoded = encodeURIComponent(pesan);

    document.getElementById("store").innerHTML=`
    <div class="card">
        <h3>üßæ STRUK PEMBELIAN</h3>
        <pre style="text-align:left">
====================
ID Transaksi: ${t.id}
Tanggal: ${t.tanggal}
Nama MC: ${t.mc}
Nomor WA: ${t.wa}
Produk: ${t.produk}
Harga: Rp${t.harga.toLocaleString()}
Status: ${t.status}
====================
        </pre>
        <button class="buy-btn" onclick="window.open('https://wa.me/${seller}?text=${encoded}','_blank')">Kirim Bukti ke Seller</button>
        <button onclick="loadStore()">Kembali</button>
    </div>`;
}

/* ADMIN PANEL - VERSI PERBAIKAN */
function adminPanel(){
    document.getElementById("about-section").style.display = "none";
    let products = JSON.parse(localStorage.getItem("products"));
    let transaksi = JSON.parse(localStorage.getItem("transactions"));
    
    // Hitung statistik
    let menunggu = transaksi.filter(t => t.status.includes("Menunggu")).length;
    let selesai = transaksi.filter(t => t.status.includes("Selesai")).length;
    let totalPendapatan = transaksi
        .filter(t => t.status.includes("Selesai"))
        .reduce((sum, t) => sum + t.harga, 0);
    
    let html = `
    <div class="admin-badge">
        <i class="fas fa-shield-alt"></i> MODE ADMIN
    </div>
    
    <!-- Statistik -->
    <div class="stats-box">
        <div class="stat-card">
            <h3>${products.length}</h3>
            <p>Produk</p>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
            <h3>${transaksi.length}</h3>
            <p>Total Transaksi</p>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #fa709a, #fee140);">
            <h3>${menunggu}</h3>
            <p>Menunggu</p>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #30cfd0, #330867);">
            <h3>${selesai}</h3>
            <p>Selesai</p>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #a8edea, #fed6e3);">
            <h3>Rp${totalPendapatan.toLocaleString()}</h3>
            <p>Pendapatan</p>
        </div>
    </div>
    
    <!-- Tambah Produk -->
    <div class="card">
        <h3>‚ûï Tambah Produk Baru</h3>
        <input class="admin-input" id="pn" placeholder="Nama Produk">
        <textarea class="admin-textarea" id="pd" rows="3" placeholder="Deskripsi (bisa Enter)"></textarea>
        <input class="admin-input" id="pp" type="number" placeholder="Harga (angka saja)">
        <button class="btn-save" onclick="addProduct()">
            <i class="fas fa-plus"></i> Tambah Produk
        </button>
    </div>
    
    <!-- Daftar Produk -->
    <div class="card">
        <h3>üì¶ Daftar Produk (${products.length})</h3>
    </div>`;

    if(products.length === 0){
        html += `<div class="card"><p>Belum ada produk. Tambahkan produk di atas!</p></div>`;
    } else {
        products.forEach((p, i) => {
            html += `
            <div class="admin-card">
                <h4>Produk #${i + 1}</h4>
                <input class="admin-input" id="editName${i}" value="${p.name}" placeholder="Nama Produk">
                <textarea class="admin-textarea" id="editDesc${i}" rows="3">${p.desc}</textarea>
                <input class="admin-input" id="editPrice${i}" type="number" value="${p.price}" placeholder="Harga">
                <div style="margin-top: 10px;">
                    <button class="btn-save" onclick="saveEdit(${i})">
                        <i class="fas fa-save"></i> Simpan
                    </button>
                    <button class="btn-delete" onclick="deleteProduct(${i})">
                        <i class="fas fa-trash"></i> Hapus
                    </button>
                </div>
            </div>`;
        });
    }

    // Daftar Transaksi
    html += `
    <div class="card">
        <h3>üìã Riwayat Transaksi (${transaksi.length})</h3>
    </div>`;
    
    if(transaksi.length === 0){
        html += `<div class="card"><p>Belum ada transaksi.</p></div>`;
    } else {
        // Urutkan: yang terbaru di atas
        transaksi.reverse().forEach((t, i) => {
            let isSelesai = t.status.includes("Selesai");
            html += `
            <div class="transaksi-item ${isSelesai ? 'selesai' : ''}">
                <div style="display:flex; justify-content:space-between; align-items:start; flex-wrap:wrap; gap:10px;">
                    <div>
                        <b>ID:</b> ${t.id}<br>
                        <b>Nama MC:</b> ${t.mc}<br>
                        <b>WhatsApp:</b> ${t.wa}<br>
                        <b>Produk:</b> ${t.produk}<br>
                        <b>Harga:</b> Rp${t.harga.toLocaleString()}<br>
                        <b>Tanggal:</b> ${t.tanggal}<br>
                        <b>Status:</b> <span class="${isSelesai ? 'status-selesai' : 'status-menunggu'}">${t.status}</span>
                    </div>
                    <div style="display:flex; flex-direction:column; gap:5px;">
                        ${!isSelesai ? `<button class="btn-done" onclick="markDone(${transaksi.length - 1 - i})"><i class="fas fa-check"></i> Selesai</button>` : ''}
                        <button class="btn-delete" onclick="deleteTransaction(${transaksi.length - 1 - i})"><i class="fas fa-trash"></i> Hapus</button>
                    </div>
                </div>
            </div>`;
        });
    }

    html += `
    <div style="text-align:center;">
        <button class="btn-back" onclick="loadStore()">
            <i class="fas fa-arrow-left"></i> Kembali ke Toko
        </button>
    </div>`;
    
    document.getElementById("store").innerHTML = html;
}

function addProduct(){
    let name = document.getElementById("pn").value.trim();
    let desc = document.getElementById("pd").value.trim();
    let price = parseInt(document.getElementById("pp").value);
    
    if(!name || !desc || !price || isNaN(price)){
        alert("Mohon isi semua data dengan benar!");
        return;
    }
    
    let products = JSON.parse(localStorage.getItem("products"));
    products.push({name, desc, price});
    localStorage.setItem("products", JSON.stringify(products));
    
    alert("Produk berhasil ditambahkan!");
    adminPanel();
}

function saveEdit(index){
    let products = JSON.parse(localStorage.getItem("products"));
    let newName = document.getElementById(`editName${index}`).value.trim();
    let newDesc = document.getElementById(`editDesc${index}`).value.trim();
    let newPrice = parseInt(document.getElementById(`editPrice${index}`).value);
    
    if(!newName || !newDesc || !newPrice || isNaN(newPrice)){
        alert("Mohon isi semua data dengan benar!");
        return;
    }
    
    products[index].name = newName;
    products[index].desc = newDesc;
    products[index].price = newPrice;
    localStorage.setItem("products", JSON.stringify(products));
    
    alert("Produk berhasil disimpan!");
    adminPanel();
}

function deleteProduct(index){
    if(!confirm("‚ö†Ô∏è Yakin ingin menghapus produk ini? Data tidak bisa dikembalikan!")){
        return;
    }
    
    let products = JSON.parse(localStorage.getItem("products"));
    products.splice(index, 1);
    localStorage.setItem("products", JSON.stringify(products));
    
    alert("Produk berhasil dihapus!");
    adminPanel();
}

function markDone(index){
    let transaksi = JSON.parse(localStorage.getItem("transactions"));
    transaksi[index].status = "üü¢ Pesanan Selesai";
    localStorage.setItem("transactions", JSON.stringify(transaksi));
    adminPanel();
}

function deleteTransaction(index){
    if(!confirm("‚ö†Ô∏è Yakin ingin menghapus transaksi ini? Data tidak bisa dikembalikan!")){
        return;
    }
    
    let transaksi = JSON.parse(localStorage.getItem("transactions"));
    transaksi.splice(index, 1);
    localStorage.setItem("transactions", JSON.stringify(transaksi));
    
    alert("Transaksi berhasil dihapus!");
    adminPanel();
}

loadStore();
</script>
</body>
</html>
